<style>body{margin:0;text-align:center;background:#000;touch-action:none}</style><canvas id="c"></canvas><script>(()=>{function e(e,t){return Math.floor(Math.random()*(t+1-e)+e)}const t=window,o=document,a=[38,38,40,40,37,39,37,39,66,65];let n=0;const i=0,r=1,A=2;let h,s,m,w=i;const l=c.getContext("2d"),v=320,y=240,g=c.cloneNode(),u=g.getContext("2d"),d="abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/",x=0,f=1,M=2,Y={zuchini:{move:[{x:0,y:0,w:16,h:18},{x:16,y:0,w:16,h:18},{x:32,y:0,w:16,h:18},{x:48,y:0,w:16,h:18},{x:64,y:0,w:16,h:18}]}},p=8,X=.1;let b,k,E,D,F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVgAAAAIAgMAAADB+w+QAAAADFBMVEUAAAARCgP///8AAADe3w1AAAAAAXRSTlMAQObYZgAAAUlJREFUKM9VUjFuwzAMpAf5BVGB+jVeuquA6CFzUYDqZzzEQ3Z5ENr+sXeiE6MiJNFH8kTSFFXNMWtSrJhz1K7oTDgkTX2rL2L0CCkgApKp9+8kWDwvEUqU0rpUv836bWUuZjbVUvum5Vj0mIhCrEJf/Zu04yryYVBMEOBE23/afrZTHpS+mcbSbEfUrduayDCPa8zvbZiHJt1l6xSbaWkvtwgS0p4Zeij3tMOjFsQsrUC/wkvb9bcYcx3XqY4Vd2UTntlaI62xJWr3BxWwtvRaPu9ThdxAt1/3xatoQ7WvghwpsJJ8FQ/0bIuXeTxk3vOdBY/sIG5qHkFZdvoB+V6AU2Iub8NaZjlcGOIB1HH6L7M0EavIgLTQzweAMnfaflg6RcRex9lEcnwOWPIBi0lxHgMmAQDHLGjodh8o2oFm4Id4E8B3CZLlD7GmBBrI7F8nAAAAAElFTkSuQmCC",T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAASBAMAAAA+r0T5AAAAFVBMVEUAAAA4ODhDHFiNL3waNDzkZJohY1nptXIRAAAAAnRSTlMAwO33D4gAAAC4SURBVCjPjZDRDcMgDEQDygBhA3QJC8AC+ai6QNQNqu4/QhvOl37EauofH/hh3TH8rtuf8/HpTcdVatEciwfeBcLmEcgeuBxgzcZVF9TzWNB7eTS4CYrAzcBW4aYvEMjdc0U+0hu/dtAcRQMgEEo3vjo4CwQUhtzHqyYEZYmA6us1otITziFtAchtFKhnUF7tu/gkIrugvJbWQHlRaCAY0sSbwK4KKfWedi7twi6Go092pAiJ6mLjG9jIGdnmal9GAAAAAElFTkSuQmCC",U=!0;function B(){n=0,h=60,s=S("zuchini",v/2,y/2,100),m=[s,S("zuchini",20,20),S("zuchini",20,y-20),S("zuchini",v-20,20),S("zuchini",v-20,y-20)],w=r}function z(e){0>e.x?e.x=0:e.x>v-e.w&&(e.x=v-e.w),0>e.y?e.y=0:e.y>y-e.h&&(e.y=y-e.h)}function S(t,o=0,a=0,n=20){const i=Y[t].move,c=e(0,i.length-1);return{action:"move",frame:c,frameTime:0,h:i[c].h,lastX:o,lastY:a,moveX:0,moveY:0,online:!0,speed:n,type:t,w:i[c].w,x:o,y:a}}function C(e){e.frameTime+=k,e.frameTime>X&&(e.frameTime-=X,e.frame+=1,e.frame%=Y[e.type][e.action].length);const t=e.speed*k;e.x+=t*e.moveX,e.y+=t*e.moveY}function K(e){const t=Y[e.type][e.action][e.frame],o=s.online&&e.online||s===e?e.x:e.lastX,a=s.online&&e.online||s===e?e.y:e.lastY;u.drawImage(T,t.x,t.y,t.w,t.h,Math.round(o),Math.round(a),t.w,t.h)}function I(e,t,o,a=x,n=1){const i=n*p,c=e.length*i,r=a===M?c:a===f?c/2:0;[...e].forEach((e,a)=>{u.drawImage(F,d.indexOf(e)*p,0,p,p,t+a*i-r,o,i,i)})}function Q(){U&&(D=requestAnimationFrame(Q),(()=>{switch(u.fillStyle="#fff",u.fillRect(0,0,v,y),w){case i:I("subwar 2051",p,p),I("press any key",v/2,y/2,f),n===a.length&&I("konami mode on",v-p,p,M);break;case r:I(`sonar: ${s.online?"on":"off"}line`,p,p),(()=>{const e=Math.floor(Math.ceil(h)/60),t=Math.ceil(h)-60*e;I(`${e}:${t>9?"":"0"}${t}`,v-p,p,M)})(),m.forEach(K);break;case A:I("game over",p,p)}l.drawImage(g,0,0,v,y,0,0,c.width,c.height)})(),b=Date.now(),k=(b-E)/1e3,(()=>{switch(w){case r:0>(h-=k)&&(w=A),C(s),z(s),m.slice(1).forEach(t=>{(t=>{let{lastDirection:o=0}=t;var a;o+=k,Math.random()<o/10&&(t[`move${.5>Math.random()?"X":"Y"}`]=(a=[-1,0,1])[e(0,a.length-1)],o=0),t.lastDirection=o})(t),C(t);const o=((e,t)=>{const o={entity1MaxX:e.x+e.w,entity1MaxY:e.y+e.h,entity2MaxX:t.x+t.w,entity2MaxY:t.y+t.h};return o.collide=e.x<o.entity2MaxX&&o.entity1MaxX>t.x&&e.y<o.entity2MaxY&&o.entity1MaxY>t.y,o})(s,t);o.collide&&((e,t,o)=>{const{entity1MaxX:a,entity1MaxY:n,entity2MaxX:i,entity2MaxY:c}=o,r=a-t.x,A=n-t.y,h=i-e.x,s=c-e.y;e.moveX>0&&e.moveY>0?A>r?e.x-=r:e.y-=A:e.moveX>0&&0>e.moveY?s>r?e.x-=r:e.y+=s:e.moveX>0?e.x-=r:0>e.moveX&&e.moveY>0?A>h?e.x+=h:e.y-=A:0>e.moveX&&0>e.moveY?s>h?e.x+=h:e.y+=s:0>e.moveX?e.x+=h:e.moveY>0?e.y-=A:0>e.moveY&&(e.y+=s)})(s,t,o),s.switchMode&&s.online&&(e=>{e.lastX=e.x,e.lastY=e.y})(t),z(t)}),s.switchMode&&(s.switchMode=!1,s.online=!s.online)}})(),E=b)}function R(e){(U=e)?(E=Date.now(),Q()):cancelAnimationFrame(D)}function V(e){return new Promise(t=>{var o=new Image;o.onload=(()=>{t(o)}),o.src=e})}onload=(async e=>{o.title="Subwar 2051",onresize(),F=await V(F),T=await V(T),R(!0)}),onresize=t.onrotate=(()=>{g.width=v,g.height=y;const e=Math.min(innerWidth/v,innerHeight/y);c.width=v*e,c.height=y*e,l.imageSmoothingEnabled=u.imageSmoothingEnabled=!1}),o.onvisibilitychange=(e=>{R(!e.target.hidden)}),onkeydown=(e=>{if(e.preventDefault(),!e.repeat)switch(w){case r:switch(e.code){case"ArrowLeft":case"KeyA":s.moveX=-1;break;case"ArrowUp":case"KeyW":s.moveY=-1;break;case"ArrowRight":case"KeyD":s.moveX=1;break;case"ArrowDown":case"KeyS":s.moveY=1;break;case"KeyP":R(!U)}}}),onkeyup=(e=>{switch(w){case i:e.which!==a[n]||n===a.length?B():n++;break;case r:switch(e.code){case"ArrowLeft":case"KeyA":case"ArrowRight":case"KeyD":s.moveX=0;break;case"ArrowUp":case"KeyW":case"ArrowDown":case"KeyS":s.moveY=0;break;case"KeyO":case"KeyY":s.switchMode=!0}break;case A:switch(e.which){case"KeyT":open("https://twitter.com/intent/tweet?text=viral%20marketing%20message%20https%3A%2F%2Fgoo.gl%2Fsome tiny Google url here","_blank");break;default:w=i}}});let j=0,H=0,W=0,Z=0;function O(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}t.ontouchstart=t.onpointerdown=(e=>{switch(e.preventDefault(),w){case r:[W,Z]=[j,H]=O(e)}}),t.ontouchmove=t.onpointermove=(e=>{switch(e.preventDefault(),w){case r:j&&H&&(([e,t])=>{e>W?(W=e)-j>30&&(s.moveX=1):j>e?W-(j=e)>30&&(s.moveX=-1):W>e&&s.moveX>0?(j=e,s.moveX=0):e>j&&0>s.moveX&&(W=e,s.moveX=0),t>Z?(Z=t)-H>30&&(s.moveY=1):H>t?Z-(H=t)>30&&(s.moveY=-1):Z>t&&s.moveY>0?(H=t,s.moveY=0):t>H&&0>s.moveY&&(Z=t,s.moveY=0)})(O(e))}}),t.ontouchend=t.onpointerup=(e=>{switch(e.preventDefault(),w){case i:B();break;case r:s.moveX=s.moveY=0,j=H=W=Z=0;break;case A:w=i}})})();</script>
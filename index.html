<style>body{margin:0;text-align:center;background:#000;touch-action:none}</style><canvas id="c"></canvas><script>(()=>{const e=window,t=document,o=[38,38,40,40,37,39,37,39,66,65];let a=0;const i=0,n=1,r=2;let s,h,l,d=i;const m=c.getContext("2d"),g=c.cloneNode(),v=g.getContext("2d"),w=c.cloneNode(),A=w.getContext("2d"),b="abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/",u=0,f=1,y=2,p=8,k=.1;let M,X,Y,P,S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVgAAAAIAgMAAADB+w+QAAAADFBMVEUAAAARCgP///8AAADe3w1AAAAAAXRSTlMAQObYZgAAAUlJREFUKM9VUjFuwzAMpAf5BVGB+jVeuquA6CFzUYDqZzzEQ3Z5ENr+sXeiE6MiJNFH8kTSFFXNMWtSrJhz1K7oTDgkTX2rL2L0CCkgApKp9+8kWDwvEUqU0rpUv836bWUuZjbVUvum5Vj0mIhCrEJf/Zu04yryYVBMEOBE23/afrZTHpS+mcbSbEfUrduayDCPa8zvbZiHJt1l6xSbaWkvtwgS0p4Zeij3tMOjFsQsrUC/wkvb9bcYcx3XqY4Vd2UTntlaI62xJWr3BxWwtvRaPu9ThdxAt1/3xatoQ7WvghwpsJJ8FQ/0bIuXeTxk3vOdBY/sIG5qHkFZdvoB+V6AU2Iub8NaZjlcGOIB1HH6L7M0EavIgLTQzweAMnfaflg6RcRex9lEcnwOWPIBi0lxHgMmAQDHLGjodh8o2oFm4Id4E8B3CZLlD7GmBBrI7F8nAAAAAElFTkSuQmCC",x=!0;function D(){a=0,s=60,h=I("player",g.width/2,g.height/2,30),l=[h,I("sub1",100,100),I("sub1",100,g.height-100),I("sub1",g.width-100,100),I("sub1",g.width-100,g.height-100)],d=n}function I(e,t=0,o=0,a=20,i=6){return{moveX:0,moveY:0,online:!0,radius:i,speed:a,type:e,x:t,y:o}}function T(e){e.dead=!0}function E(e){v.save();const{visibleX:t,visibleY:o,visibleAngle:a}=e;v.translate(Math.round(t),Math.round(o)),v.rotate(a/180*Math.PI),"player"===e.type?(v.shadowBlur=10,v.fillStyle="rgb(75,190,250)",v.shadowColor=v.fillStyle,v.beginPath(),v.arc(0,0,5,0,Math.PI+Math.PI),v.fillRect(-2,-12,4,12),v.fill(),v.closePath()):"sub1"===e.type?(v.beginPath(),v.shadowBlur=10,v.fillStyle=h.online?"rgb(230,90,100)":"rgb(55,40,35)",v.shadowColor=v.fillStyle,v.fillRect(-5,-5,10,10),v.fillRect(-2,-12,4,12),v.fill(),v.closePath()):"debris"===e.type&&renderDebris(e),v.restore()}function B(e){v.save();const{visibleX:t,visibleY:o,dashOffset:a=0,dashTime:i=0}=e;v.translate(Math.round(t),Math.round(o)),"player"===e.type?((e=>{v.shadowBlur=10,v.strokeStyle="rgb(70,105,105)",v.shadowColor=v.strokeStyle,v.beginPath(),v.arc(0,0,80,0,Math.PI+Math.PI),v.stroke(),v.closePath(),v.beginPath(),v.lineDashOffset=e,v.setLineDash([4,8]),v.arc(0,0,40,0,Math.PI+Math.PI),v.stroke(),v.closePath()})(a),e.dashTime=i+X,e.dashTime>k&&(e.dashTime-=k,e.dashOffset=(a-1)%12)):(v.shadowBlur=10,v.strokeStyle="rgb(55,40,35)",v.shadowColor=v.strokeStyle,v.beginPath(),v.arc(0,0,80,0,Math.PI+Math.PI),v.stroke(),v.closePath()),v.restore()}function F(e,t,o,a=u,i=1){const n=i*p,r=e.length*n,s=a===y?r:a===f?r/2:0;[...e].forEach((e,a)=>{v.drawImage(S,b.indexOf(e)*p,0,p,p,t+a*n-s,o,n,n)})}function U(){x&&(P=requestAnimationFrame(U),(()=>{switch(v.fillStyle="rgb(20,35,40)",v.fillRect(0,0,g.width,g.height),d){case i:F("subwar 2051",p,p),F("press any key",g.width/2,g.height/2,f),a===o.length&&F("konami mode on",g.width-p,p,y);break;case n:v.fillStyle=v.createPattern(w,"repeat"),v.fillRect(0,0,g.width,g.height),l.forEach(B),l.forEach(E),F(`sonar: ${h.online?"on":"off"}line`,p,p),(()=>{const e=Math.floor(Math.ceil(s)/60),t=Math.ceil(s)-60*e;F(`${e}:${t>9?"":"0"}${t}`,g.width-p,p,y)})();break;case r:F("game over",p,p)}m.drawImage(g,0,0,g.width,g.height,0,0,c.width,c.height)})(),M=Date.now(),X=(M-Y)/1e3,(()=>{switch(d){case n:(0>(s-=X)||h.dead)&&(d=r),l.forEach(e=>{(e=>{const t=e.speed*X;e.x+=t*e.moveX,e.y+=t*e.moveY,e.angle=0>e.moveX&&0>e.moveY?-45:0>e.moveX&&0===e.moveY?-90:0>e.moveX&&e.moveY>0?-135:0===e.moveX&&0>e.moveY?0:e.moveX>0&&0>e.moveY?45:e.moveX>0&&0===e.moveY?90:e.moveX>0&&e.moveY>0?135:0===e.moveX&&e.moveY>0?180:0})(e),e!==h&&(((e,t)=>Math.pow(e.radius+t.radius,2)>Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))(h,e)&&(T(h),T(e)),(e=>{let{lastDirection:t=0}=e;var o,a;t+=X,Math.random()<t/10&&(e[`move${.5>Math.random()?"X":"Y"}`]=(o=[-1,0,1])[(a=o.length-1,Math.floor(Math.random()*(a+1-0)+0))],t=0),e.lastDirection=t})(e)),(e=>{0>e.x?e.x=0:e.x>g.width-e.radius&&(e.x=g.width-e.radius),0>e.y?e.y=0:e.y>g.height-e.radius&&(e.y=g.height-e.radius)})(e),((e,t)=>{t&&(e.visibleX=e.x,e.visibleY=e.y,e.visibleAngle=e.angle)})(e,h.online&&e.online)}),l=l.filter(e=>!e.dead)}})(),Y=M)}function C(e){(x=e)?(Y=Date.now(),U()):cancelAnimationFrame(P)}onload=(async e=>{t.title="Subwar 2051",onresize(),w.width=w.height=64,A.strokeStyle="rgb(40,55,50)",A.beginPath(),A.moveTo(0,4),A.lineTo(8,4),A.stroke(),A.closePath(),A.beginPath(),A.moveTo(4,0),A.lineTo(4,8),A.stroke(),A.closePath(),S=await(e=>new Promise(t=>{var o=new Image;o.onload=(()=>{t(o)}),o.src=e}))(S),C(!0)}),onresize=e.onrotate=(()=>{c.width=g.width=innerWidth>1.6*innerHeight?1.6*innerHeight:innerWidth,c.height=g.height=innerWidth>1.6*innerHeight?innerHeight:innerWidth/1.6,m.imageSmoothingEnabled=v.imageSmoothingEnabled=!1}),t.onvisibilitychange=(e=>{C(!e.target.hidden)}),onkeydown=(e=>{if(e.preventDefault(),!e.repeat)switch(d){case n:switch(e.code){case"ArrowLeft":case"KeyA":h.moveX=-1;break;case"ArrowUp":case"KeyW":h.moveY=-1;break;case"ArrowRight":case"KeyD":h.moveX=1;break;case"ArrowDown":case"KeyS":h.moveY=1;break;case"KeyP":C(!x)}}}),onkeyup=(e=>{switch(d){case i:e.which!==o[a]||a===o.length?D():a++;break;case n:switch(e.code){case"ArrowLeft":case"KeyA":case"ArrowRight":case"KeyD":h.moveX=0;break;case"ArrowUp":case"KeyW":case"ArrowDown":case"KeyS":h.moveY=0;break;case"KeyO":case"KeyF":h.online=!h.online,h.switchModeTime=M}break;case r:switch(e.code){case"KeyT":open("https://twitter.com/intent/tweet?text=viral%20marketing%20message%20https%3A%2F%2Fgoo.gl%2Fsome tiny Google url here","_blank");break;default:d=i}}});let K=0,R=0,W=0,H=0;function O(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}e.ontouchstart=e.onpointerdown=(e=>{switch(e.preventDefault(),d){case n:[W,H]=[K,R]=O(e)}}),e.ontouchmove=e.onpointermove=(e=>{switch(e.preventDefault(),d){case n:K&&R&&(([e,t])=>{e>W?(W=e)-K>44&&(h.moveX=1):K>e?W-(K=e)>44&&(h.moveX=-1):W>e&&h.moveX>0?(K=e,h.moveX=0):e>K&&0>h.moveX&&(W=e,h.moveX=0),t>H?(H=t)-R>44&&(h.moveY=1):R>t?H-(R=t)>44&&(h.moveY=-1):H>t&&h.moveY>0?(R=t,h.moveY=0):t>R&&0>h.moveY&&(H=t,h.moveY=0)})(O(e))}}),e.ontouchend=e.onpointerup=(e=>{switch(e.preventDefault(),d){case i:D();break;case n:h.moveX=h.moveY=0,K=R=W=H=0;break;case r:d=i}})})();</script>